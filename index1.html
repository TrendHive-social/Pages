<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video & Audio Quality Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="bg-gray-900 text-white p-6 rounded-lg shadow-lg w-full max-w-md">
        <h2 class="text-xl font-bold mb-4">Video & Audio Quality Analyzer</h2>
        <input type="file" id="file-input" accept="video/*" class="file-input bg-blue-500 text-white py-2 px-4 rounded w-full mb-4">
        <button id="analyze-button" class="bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded w-full">Analyze</button>
        <div id="result-container" class="mt-4 hidden">
            <h3 class="text-lg font-semibold">Video Metrics:</h3>
            <p><strong>Resolution:</strong> <span id="resolution"></span></p>
            <p><strong>Frame Rate:</strong> <span id="frame-rate"></span></p>
            <p><strong>Bitrate:</strong> <span id="bitrate"></span></p>

            <h3 class="text-lg font-semibold mt-4">Audio Metrics:</h3>
            <p><strong>Duration:</strong> <span id="duration"></span></p>
            <p><strong>Sample Rate:</strong> <span id="sample-rate"></span></p>
            <p><strong>RMS Energy:</strong> <span id="rms-energy"></span></p>
            <p><strong>Spectral Centroid:</strong> <span id="spectral-centroid"></span></p>
        </div>
    </div>

    <script>
        document.getElementById('analyze-button').addEventListener('click', async () => {
            const fileInput = document.getElementById('file-input');
            const resultContainer = document.getElementById('result-container');

            if (!fileInput.files.length) {
                alert('Please upload a video file first!');
                return;
            }

            const formData = new FormData();
            formData.append('video', fileInput.files[0]);

            try {
                const response = await fetch('http://127.0.0.1:5000/analyze', {
                    method: 'POST',
                    body: formData
                });
                const data = await response.json();

                if (data.status === 'success') {
                    // Display Video Metrics
                    document.getElementById('resolution').innerText = data.video.resolution;
                    document.getElementById('frame-rate').innerText = data.video.frame_rate;
                    document.getElementById('bitrate').innerText = data.video.bitrate;

                    // Display Audio Metrics
                    document.getElementById('duration').innerText = data.audio.duration;
                    document.getElementById('sample-rate').innerText = data.audio.sample_rate;
                    document.getElementById('rms-energy').innerText = data.audio.rms_energy;
                    document.getElementById('spectral-centroid').innerText = data.audio.spectral_centroid;

                    resultContainer.classList.remove('hidden');
                } else {
                    alert(data.message);
                }
            } catch (error) {
                alert('Error analyzing the video.');
            }
        });
    </script>
</body>
</html>
